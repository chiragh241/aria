@tailwind base;
@tailwind components;
@tailwind utilities;

:root, html.dark {
  --bg-primary: #0a1120;
  --bg-secondary: #0f172a;
  --bg-card: #1e293b;
  --bg-card-hover: #334155;
  --bg-muted: rgba(248, 250, 252, 0.15);
  --bg-hover: rgba(255, 255, 255, 0.04);
  --text-primary: #f1f5f9;
  --text-secondary: #94a3b8;
  --border-subtle: rgba(255, 255, 255, 0.06);
  --grid-line: rgba(255, 255, 255, 0.15);
  --accent: #3b82f6;
  --accent-purple: #8b5cf6;
  --accent-gradient: linear-gradient(135deg, #3b82f6, #8b5cf6);
}

html.light {
  --bg-primary: #f8fafc;
  --bg-secondary: #f1f5f9;
  --bg-card: #e2e8f0;
  --bg-card-hover: #cbd5e1;
  --bg-muted: rgba(15, 23, 42, 0.06);
  --bg-hover: rgba(0, 0, 0, 0.04);
  --text-primary: #0f172a;
  --text-secondary: #475569;
  --border-subtle: rgba(0, 0, 0, 0.08);
  --grid-line: rgba(0, 0, 0, 0.06);
}

body {
  background-color: var(--bg-primary);
  color: var(--text-primary);
  @apply antialiased;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
}

/* ── Custom scrollbar ──────────────────────────────────────────────────────── */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  @apply bg-transparent;
}

::-webkit-scrollbar-thumb {
  background-color: color-mix(in srgb, var(--bg-card) 80%, transparent);
  @apply rounded-full;
}

::-webkit-scrollbar-thumb:hover {
  background-color: color-mix(in srgb, var(--bg-card) 100%, transparent);
}

/* ── Theme-aware utilities ─────────────────────────────────────────────────── */
@layer components {
  .bg-theme-primary { background-color: var(--bg-primary); }
  .bg-theme-card { background-color: var(--bg-card); }
  .bg-theme-muted { background-color: var(--bg-muted); }
  .bg-theme-hover { background-color: var(--bg-hover); }
  .text-theme-primary { color: var(--text-primary); }
  .text-theme-secondary { color: var(--text-secondary); }
  .border-theme { border-color: var(--border-subtle); }
  .input-theme {
    background-color: color-mix(in srgb, var(--bg-card) 90%, transparent);
    border: 1px solid var(--border-subtle);
    color: var(--text-primary);
  }
  .input-theme::placeholder { color: var(--text-secondary); opacity: 0.8; }
  .card-theme {
    background-color: color-mix(in srgb, var(--bg-card) 80%, transparent);
    border: 1px solid var(--border-subtle);
  }
  .btn-theme-secondary {
    background-color: color-mix(in srgb, var(--bg-card) 90%, transparent);
    border: 1px solid var(--border-subtle);
    color: var(--text-primary);
  }
  .btn-theme-secondary:hover {
    background-color: var(--bg-muted);
  }
}

/* ── Glass card utility ────────────────────────────────────────────────────── */
@layer components {
  .glass-card {
    background-color: color-mix(in srgb, var(--bg-card) 70%, transparent);
    @apply backdrop-blur-sm rounded-xl;
    border: 1px solid var(--border-subtle);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }

  .glass-card-hover {
    @apply glass-card transition-all duration-200;
  }
  .glass-card-hover:hover {
    background-color: color-mix(in srgb, var(--bg-card) 90%, transparent);
    border-color: color-mix(in srgb, var(--border-subtle) 1.5, transparent);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  .glass-sidebar {
    background-color: color-mix(in srgb, var(--bg-secondary) 95%, transparent);
    @apply backdrop-blur-md;
    border-right: 1px solid var(--border-subtle);
  }

  .glass-input {
    background-color: color-mix(in srgb, var(--bg-card) 90%, transparent);
    @apply rounded-lg transition-all;
    border: 1px solid var(--border-subtle);
    color: var(--text-primary);
  }
  .glass-input::placeholder {
    color: var(--text-secondary);
    opacity: 0.8;
  }
  .glass-input:focus {
    @apply outline-none ring-2;
    --tw-ring-color: rgb(59 130 246 / 0.4);
    border-color: rgb(59 130 246 / 0.5);
  }

  .btn-primary {
    @apply px-4 py-2.5 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400
           text-white rounded-lg font-medium transition-all shadow-lg shadow-blue-500/20
           disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none;
  }

  .btn-ghost {
    @apply px-3 py-2 rounded-lg transition-all;
    color: var(--text-secondary);
  }
  .btn-ghost:hover {
    color: var(--text-primary);
    background-color: color-mix(in srgb, var(--border-subtle) 50%, transparent);
  }

  .stat-card {
    @apply glass-card p-4 relative overflow-hidden;
  }

  .stat-card::before {
    content: '';
    @apply absolute top-0 left-0 right-0 h-[2px];
  }

  .dashboard-card {
    background-color: color-mix(in srgb, var(--bg-card) 80%, transparent);
    @apply rounded-2xl backdrop-blur-sm;
    border: 1px solid var(--border-subtle);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }

  .dashboard-card:hover {
    border-color: color-mix(in srgb, var(--border-subtle) 1.5, transparent);
    box-shadow: 0 4px 24px -4px rgba(0, 0, 0, 0.15);
  }

  .badge {
    @apply inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium;
  }

  .page-header {
    @apply mb-8;
  }

  .page-title {
    @apply text-2xl font-bold tracking-tight;
    color: var(--text-primary);
  }

  .page-subtitle {
    @apply mt-1 text-sm;
    color: var(--text-secondary);
  }
}

/* ── Chat message styles ───────────────────────────────────────────────────── */
.message-user {
  @apply bg-gradient-to-br from-blue-600 to-blue-500 text-white rounded-2xl rounded-br-sm shadow-lg shadow-blue-500/10;
}

.message-assistant {
  background-color: color-mix(in srgb, var(--bg-card) 85%, transparent);
  color: var(--text-primary);
  @apply rounded-2xl rounded-bl-sm;
  border: 1px solid var(--border-subtle);
}

/* ── Markdown content ──────────────────────────────────────────────────────── */
.markdown-content {
  @apply max-w-none text-sm leading-relaxed;
  color: var(--text-primary);
  --markdown-muted: color-mix(in srgb, var(--text-primary) 80%, transparent);
}

.markdown-content p {
  @apply mb-3;
}

.markdown-content h1, .markdown-content h2, .markdown-content h3 {
  @apply font-semibold mb-2 mt-4;
  color: var(--text-primary);
}

.markdown-content ul, .markdown-content ol {
  @apply pl-5 mb-3 space-y-1;
}

.markdown-content li {
  color: var(--markdown-muted);
}

.markdown-content a {
  @apply underline;
  color: rgb(96 165 250);
}
.markdown-content a:hover {
  color: rgb(147 197 253);
}

.markdown-content pre {
  background-color: color-mix(in srgb, var(--bg-card) 90%, transparent);
  @apply rounded-lg p-4 overflow-x-auto mb-3;
  border: 1px solid var(--border-subtle);
}

.markdown-content code {
  background-color: color-mix(in srgb, var(--bg-card) 70%, transparent);
  @apply px-1.5 py-0.5 rounded text-sm;
}

.markdown-content pre code {
  @apply bg-transparent p-0;
}

.markdown-content blockquote {
  @apply border-l-2 pl-4 italic;
  border-color: var(--border-subtle);
  color: var(--text-secondary);
}

/* ── Animations ────────────────────────────────────────────────────────────── */
@keyframes pulse-dot {
  0%, 80%, 100% {
    transform: scale(0);
  }
  40% {
    transform: scale(1);
  }
}

.typing-indicator span {
  @apply w-2 h-2 bg-blue-400/60 rounded-full inline-block mx-0.5;
  animation: pulse-dot 1.4s infinite ease-in-out both;
}

.typing-indicator span:nth-child(1) {
  animation-delay: -0.32s;
}

.typing-indicator span:nth-child(2) {
  animation-delay: -0.16s;
}

@keyframes gradient-shift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.animated-gradient {
  background-size: 200% 200%;
  animation: gradient-shift 8s ease infinite;
}

/* ── Orb background for login ──────────────────────────────────────────────── */
@keyframes orb-float-1 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  25% { transform: translate(30px, -20px) scale(1.05); }
  50% { transform: translate(-10px, 20px) scale(0.95); }
  75% { transform: translate(-30px, -10px) scale(1.02); }
}

@keyframes orb-float-2 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(-25px, 15px) scale(1.03); }
  66% { transform: translate(20px, -25px) scale(0.97); }
}

.login-orb-1 {
  animation: orb-float-1 12s ease-in-out infinite;
}

.login-orb-2 {
  animation: orb-float-2 15s ease-in-out infinite;
}

/* ── Status pulse ──────────────────────────────────────────────────────────── */
@keyframes status-pulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); }
  50% { box-shadow: 0 0 0 4px rgba(34, 197, 94, 0); }
}

.status-online {
  @apply w-2 h-2 bg-green-400 rounded-full;
  animation: status-pulse 2s ease-in-out infinite;
}

/* ── Table hover rows ──────────────────────────────────────────────────────── */
.table-row-hover {
  @apply transition-colors duration-150 cursor-pointer;
}
.table-row-hover:hover {
  background-color: var(--bg-hover);
}
